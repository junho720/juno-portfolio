<body class="pop_body body_user">
    <div class="pop_1 pop_user" >
        <div class="con on" style="height: 430px;">
            <h2 class="h_img">발송 대상 선택</h2>            
            <div id="contentsbox">
                <form name="form1" method="get" target="left" action="pop_user_left.jsp">
                <input type="hidden" name="idx" value="{{idx}}">
                <ul class="nmsch">
                    <li class="hd">이름 / 아이디</li>
                    <li class="inp"><input type="text" class="txt" name="s_keyword"/></li>
                    <li class="btn"><input type="image" src="../common/images/btn/btn_search.png" alt="검색" style="height:28px" /></li>
                </ul>
                </form>
                <div class="cntsmbox_01 clearfix">
                    <div class="cntsmbox_02">
                        <iframe name="left" id="left" src="pop_user_left.jsp?idx={{idx}}&{{query}}" width="210" frameborder="0" height="230" scrolling="no"></iframe>
                    </div>        
                    <div class="btnbox">
                        <a href="javascript:void(0);" onclick="addBtnContents();"><img src="../common/images/popup/btn_moveright.png" alt="" /></a>
                        <a href="javascript:void(0);" onclick="removeBtnContents();"><img src="../common/images/popup/btn_moveleft.png" alt="" /></a>
                    </div>        
                    <div class="cntsmbox_02">
                        <iframe name="right" id="right" src="pop_user_right.jsp" width="210" frameborder="0" height="230" scrolling="no"></iframe>
                    </div>
                </div>
            </div>
            <div>
                <a href="javascript: window.close();"  class="btn" style="margin: 0 auto;">닫기</a>
            </div>
        </div>            
    </div>  
</body>

<style>
    ul.nmsch{margin-top: 15px; font-size: 16px; border: 1px solid #e1e1e1; padding: 10px; border-radius: 10px; background-color: #f6f6f6;}
    ul.nmsch .inp input{border: 1px solid #e1e1e1;}
    body{min-width: 100% !important;}
</style>



<script language="JavaScript">
    
        var leftElement;
        var rightElement;
        var sendElement = opener.document.forms['form1']['send_list'];
        
        function addContent() {
            if(leftElement.selectedIndex == -1 || leftElement.value == "") {
                alert('추가할 회원을 선택하세요.');
                return false;
            }
            for(var i=0; i<rightElement.length; i++) {
                if(rightElement.options[i].value == leftElement.options[leftElement.selectedIndex].value) {
                    alert("이미 등록된 회원입니다.");
                    return;
                }
            }
            addSelectOption(rightElement, leftElement.options[leftElement.selectedIndex].value, leftElement.options[leftElement.selectedIndex].text);
            setValues();
        }
        function addBtnContents() {
            for(var i=0; i<leftElement.length; i++) {
                if(leftElement.options[i].selected) {
                    if(isExtists(leftElement.options[i].value)) continue;
                    addSelectOption(rightElement, leftElement.options[i].value, leftElement.options[i].text);
                }
            }
            setValues();
        }
        function isExtists(leftValue) {
            var extists = false;
            for(var j=0; j<rightElement.length; j++) {
                if(rightElement.options[j].value == leftValue) {
                    extists = true;
                    break;
                }
            }
            return extists;
        }
        function removeContent() {
            if(rightElement.selectedIndex == -1) { alert("삭제할 회원을 선택하세요."); return; }
            removeSelectOption(rightElement, rightElement.selectedIndex);
            setValues();
        }
        function removeBtnContents() {
            for(var i=rightElement.length -1; i>=0; i--) {
                if(rightElement.options[i].selected) removeSelectOption(rightElement, i);		
            }
            setValues();
        }
        function setValues() {
            var arr = new Array();
            for(var i=0; i<rightElement.length; i++) {
                arr[i] = rightElement[i].value;
            }
            document.forms['form1']['idx'].value = arr.join(",");
            right.document.forms['form1']['idx'].value = arr.join(",");
        }
        function setOpenerValue() {
            for(var i=0; i<sendElement.length; i++) addSelectOption(rightElement, sendElement.options[i].value, sendElement.options[i].text);
            setValues();
        }
        function selectUser() {
            for(var i=sendElement.length -1; i>=0; i--) removeSelectOption(sendElement, i);
            for(var i=0; i<rightElement.length; i++) addSelectOption(sendElement, rightElement.options[i].value, rightElement.options[i].text);
            opener.setValues();
            window.close();
        }

    </script>
    